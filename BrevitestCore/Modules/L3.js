var btoa = require('w3c-windowbase64').btoa;exports.get = function get(url, token) {    var result = {        'status': null,        'response': null    };        var xhr = new XMLHttpRequest();        xhr.open('GET', url);    xhr.setRequestHeader('Authorization', 'Bearer ' + token);    xhr.setRequestHeader('Content-Type', 'application/json');    xhr.onreadystatechange = function() {        if (this.readyState == 4) {            result.status = this.status;            var contentType = this.getResponseHeader('Content-Type');            if (contentType && contentType.indexOf('application/json') !== -1) {                result.response = JSON.parse(this.responseText);            }            else {                result.response = this.responseText;            }        }    };        xhr.send();    return result;};exports.post = function post(url, token, body) {    var result = {        'status': null,        'response': null    };        var xhr = new XMLHttpRequest();        xhr.open('POST', url);    xhr.setRequestHeader('Authorization', 'Bearer ' + token);    xhr.setRequestHeader('Content-Type', 'application/json');    xhr.onreadystatechange = function() {        if (this.readyState == 4) {            result.status = this.status;            if (result.status !== 0) {                var contentType = this.getResponseHeader('Content-Type');	            if (contentType && contentType.indexOf('application/json') !== -1) {	                result.response = JSON.parse(this.responseText);	            }	            else {	                result.response = this.responseText;	            }            }        }    };    	if (typeof body === 'object') {        xhr.send(JSON.stringify(body));	}	else {        xhr.send(body ? body : '');    }    return result;};exports.oauth = function oauth(url, username, password, un, pw) {	var postBody;	    var result = {        'status': null,        'response': null    };            var xhr = new XMLHttpRequest();        xhr.open('POST', url);    xhr.setRequestHeader('Authorization', 'Basic ' + btoa(username + ':' + password));    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');    xhr.onreadystatechange = function() {        if (this.readyState == 4) {            result.status = this.status;            if (result.status !== 0) {                var contentType = this.getResponseHeader('Content-Type');	            if (contentType && contentType.indexOf('application/json') !== -1) {	                result.response = JSON.parse(this.responseText);	            }	            else {	                result.response = this.responseText;	            }            }        }    };            postBody = 'grant_type=password&username=' + un() + '&password=' + pw();    xhr.send(postBody);    return result;};exports.qrImage2Code = function qrImage2Code(qrCodeImage) {	var c = ds.Cartridge.all().first();	return c.serialNumber;};