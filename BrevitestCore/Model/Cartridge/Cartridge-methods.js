model.Cartridge.methods.manufacture = function(param) {	// param: username, assayID, quantity	var assay = ds.Assay(param.assayID);	var user = ds.User.find('username === :1', param.username);	var c, i;	if (assay && user) {		for (i = 0; i < param.quantity; i += 1) {			c = ds.Cartridge.createEntity();			c.manufacturedOn = new Date();			c.assay = assay;			c.practice = user.practice;			c.registeredBy = user;			c.save();		}				return param.quantity;	}	else {		return 0;	}	};model.Cartridge.methods.manufacture.scope = 'public';